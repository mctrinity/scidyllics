{% extends 'base.html' %}

{% block content %}
<div class="about-page">
    <div class="main-content">
        <section class="about-section">
            <div class="container">
                <section id="weather" class="mb-4">
                    <h2 class="mb-3">Weather</h2>
                    <!-- Include the weather UI elements here -->
                    <div class="weather-container p-3">
                        <main>
                            <h3 class="mb-3">Which city do you wish to check?</h3>
                            <form id="locationForm">
                                <div class="form-group">
                                    <label for="city">Enter a city:</label>
                                    <input type="text" class="form-control" id="city" name="city">
                                </div>
                                <button type="submit" class="btn btn-primary">Get Weather</button>
                            </form>
                        </main>
                        <div id="weatherResult" class="title-case mt-4"></div>
                    </div>
                </section>
        
                <section id="billboard">
                    <h2>Billboard Hot 100</h2>
                    <!-- Form to input date and create Spotify playlist -->
                    <form method="POST" action="{{ url_for('create_playlist') }}">
                        {{ billboard_form.csrf_token }} <!-- Use billboard_form for the CSRF token -->
                        <div class="form-group">
                            <label for="date">Enter Date (YYYY-MM-DD):</label>
                            <input type="text" id="date" name="date" required>
                        </div>
                        <button type="submit">Create Playlist</button>
                    </form>
        
                    <!-- Display success message here if available -->
                    {% if success_message %}
                    <p>{{ success_message }}</p>
                    {% endif %}
                </section>
        
                <section id="stock-news">
                    <h2 class="mb-3">Stock News</h2>
                    <!-- Use JavaScript to fetch and display stock news here -->
                    <div id="stock-news-data">
                        <!-- Stock news will be displayed here -->
                    </div>
                </section>
            </div>
        </div>
        
        <!-- templates/whatsup.html -->
        <script>
            $(document).ready(function() {
                var cityInput = $("#city");
                var locationResult = $("#locationResult");
        
                // Apply Autocomplete widget to the city input
                cityInput.autocomplete({
                    source: cityCountryPairs,
                    minLength: 2
                });
        
                // Handle form submission
                $("#locationForm").submit(function(event) {
                    event.preventDefault(); // Prevent the form from submitting
        
                    // Get the user's input
                    var userInput = cityInput.val();
        
                    // Clear any previous error message
                    locationResult.empty();
        
                    // Display the user's input in the result div
                    locationResult.text("You entered: " + userInput);
        
                    // Trigger the weather data fetching function here
                    getWeatherData(userInput); // Replace with your actual function and API call
                });
            });
        </script>
            </div>
        </section>
    </div>
</div>
    
{% endblock content %}
